<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-Bot Advanced Strategy Playground</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        /* Top Toolbar */
        .top-toolbar {
            background: linear-gradient(90deg, #1a1a2e 0%, #16213e 100%);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 2px solid #2196f3;
            box-shadow: 0 2px 10px rgba(33, 150, 243, 0.3);
            flex-wrap: wrap;
            min-height: 50px;
        }
        
        .toolbar-section {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .toolbar-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.2);
            margin: 0 10px;
        }
        
        .btn {
            padding: 6px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #f857a6 0%, #ff5858 100%);
            color: white;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #FFC107 0%, #FF9800 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .btn.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        /* Left Sidebar */
        .sidebar {
            width: 260px;
            background: #141414;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar-tabs {
            display: flex;
            border-bottom: 1px solid #333;
        }
        
        .sidebar-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: #888;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .sidebar-tab.active {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            border-bottom: 2px solid #2196f3;
        }
        
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .component-search {
            width: 100%;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            margin-bottom: 15px;
            font-size: 13px;
        }
        
        .component-category {
            margin-bottom: 10px;
        }
        
        .category-header {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 10px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
            font-size: 13px;
        }
        
        .category-header:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .category-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .category-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 11px;
        }
        
        .category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .category-content.expanded {
            max-height: 500px;
            padding: 5px 0;
        }
        
        .component-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 10px;
            margin: 3px 5px;
            border-radius: 6px;
            cursor: move;
            transition: all 0.3s;
            font-size: 12px;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .component-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(3px);
        }
        
        .component-icon {
            font-size: 16px;
        }
        
        /* Component colors */
        .component-item.data-input { border-left-color: #4CAF50; }
        .component-item.preprocessing { border-left-color: #00BCD4; }
        .component-item.feature { border-left-color: #2196F3; }
        .component-item.analysis { border-left-color: #9C27B0; }
        .component-item.ml-model { border-left-color: #FF9800; }
        .component-item.strategy { border-left-color: #E91E63; }
        .component-item.signal { border-left-color: #673AB7; }
        .component-item.risk { border-left-color: #f44336; }
        .component-item.execution { border-left-color: #795548; }
        .component-item.utility { border-left-color: #607D8B; }
        .component-item.logic { border-left-color: #FFC107; }
        .component-item.output { border-left-color: #8BC34A; }
        
        /* Canvas Area */
        .canvas-container {
            flex: 1;
            position: relative;
            background: #0a0a0a;
            overflow: hidden;
        }
        
        .canvas-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            padding: 5px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .canvas-control-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }
        
        .canvas-control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .zoom-level {
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* Minimap */
        .minimap {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 200px;
            height: 150px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid rgba(33, 150, 243, 0.3);
            border-radius: 8px;
            z-index: 100;
            display: none;
        }
        
        .minimap.visible {
            display: block;
        }
        
        .minimap-viewport {
            position: absolute;
            border: 2px solid #2196f3;
            background: rgba(33, 150, 243, 0.2);
            cursor: move;
        }
        
        /* Canvas */
        .canvas {
            width: 100%;
            height: 100%;
            position: relative;
            background: 
                radial-gradient(circle at 20% 50%, rgba(33, 150, 243, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(156, 39, 176, 0.05) 0%, transparent 50%),
                #0a0a0a;
            background-size: cover;
            transform-origin: 0 0;
            transition: transform 0.1s;
        }
        
        .canvas-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        /* Nodes */
        .node {
            position: absolute;
            background: rgba(20, 20, 20, 0.95);
            border: 2px solid;
            border-radius: 8px;
            min-width: 160px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            cursor: move;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .node:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.7);
        }
        
        .node.selected {
            box-shadow: 0 0 30px rgba(33, 150, 243, 0.5);
            z-index: 10;
        }
        
        .node-header {
            padding: 8px 12px;
            border-radius: 6px 6px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .node-title {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .node-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .node-status.idle { background: #888; animation: none; }
        .node-status.processing { background: #2196f3; }
        .node-status.success { background: #4CAF50; }
        .node-status.error { background: #f44336; }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .node-body {
            padding: 10px;
            font-size: 11px;
        }
        
        .node-param {
            display: flex;
            justify-content: space-between;
            margin: 4px 0;
            padding: 4px 6px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 4px;
        }
        
        .node-param-label {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .node-param-value {
            color: #fff;
            font-weight: 500;
        }
        
        /* Node Ports */
        .node-ports {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .port {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #333;
            border: 2px solid;
            cursor: crosshair;
            pointer-events: all;
            transition: all 0.3s;
        }
        
        .port:hover {
            transform: scale(1.3);
        }
        
        .port.input {
            left: -6px;
        }
        
        .port.output {
            right: -6px;
        }
        
        .port.top {
            top: 50%;
            transform: translateY(-50%);
        }
        
        .port.data { border-color: #4CAF50; }
        .port.signal { border-color: #2196F3; }
        .port.control { border-color: #FFC107; }
        .port.connected { background: currentColor; }
        
        /* Connections */
        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .connection {
            stroke-width: 2;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
            transition: stroke-width 0.3s;
        }
        
        .connection:hover {
            stroke-width: 3;
        }
        
        .connection.data { stroke: #4CAF50; }
        .connection.signal { stroke: #2196F3; }
        .connection.control { stroke: #FFC107; }
        
        .connection.animated {
            stroke-dasharray: 5 5;
            animation: flow 1s linear infinite;
        }
        
        @keyframes flow {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: -10; }
        }
        
        .connection-arrow {
            fill: currentColor;
        }
        
        /* Node Types */
        .node.data-input { border-color: #4CAF50; }
        .node.data-input .node-header { background: linear-gradient(135deg, #4CAF50, #45a049); }
        
        .node.preprocessing { border-color: #00BCD4; }
        .node.preprocessing .node-header { background: linear-gradient(135deg, #00BCD4, #0097A7); }
        
        .node.feature { border-color: #2196F3; }
        .node.feature .node-header { background: linear-gradient(135deg, #2196F3, #1976D2); }
        
        .node.analysis { border-color: #9C27B0; }
        .node.analysis .node-header { background: linear-gradient(135deg, #9C27B0, #7B1FA2); }
        
        .node.ml-model { border-color: #FF9800; }
        .node.ml-model .node-header { background: linear-gradient(135deg, #FF9800, #F57C00); }
        
        .node.strategy { border-color: #E91E63; }
        .node.strategy .node-header { background: linear-gradient(135deg, #E91E63, #C2185B); }
        
        .node.signal { border-color: #673AB7; }
        .node.signal .node-header { background: linear-gradient(135deg, #673AB7, #512DA8); }
        
        .node.risk { border-color: #f44336; }
        .node.risk .node-header { background: linear-gradient(135deg, #f44336, #d32f2f); }
        
        .node.execution { border-color: #795548; }
        .node.execution .node-header { background: linear-gradient(135deg, #795548, #5D4037); }
        
        .node.utility { border-color: #607D8B; }
        .node.utility .node-header { background: linear-gradient(135deg, #607D8B, #455A64); }
        
        .node.logic { border-color: #FFC107; }
        .node.logic .node-header { background: linear-gradient(135deg, #FFC107, #FFA000); }
        
        .node.output { border-color: #8BC34A; }
        .node.output .node-header { background: linear-gradient(135deg, #8BC34A, #689F38); }
        
        /* Special Nodes */
        .node.router {
            border-style: dashed;
            background: rgba(255, 193, 7, 0.1);
        }
        
        .node.merger {
            border-style: dashed;
            background: rgba(33, 150, 243, 0.1);
        }
        
        /* Right Panel */
        .right-panel {
            width: 300px;
            background: #141414;
            border-left: 1px solid #333;
            display: flex;
            flex-direction: column;
        }
        
        .panel-tabs {
            display: flex;
            border-bottom: 1px solid #333;
        }
        
        .panel-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
            border: none;
            color: #888;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .panel-tab.active {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
            border-bottom: 2px solid #2196f3;
        }
        
        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }
        
        .property-section {
            margin-bottom: 20px;
        }
        
        .property-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .property-item {
            margin-bottom: 12px;
        }
        
        .property-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4px;
        }
        
        .property-input {
            width: 100%;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 12px;
        }
        
        .property-select {
            width: 100%;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 12px;
        }
        
        /* Status Bar */
        .status-bar {
            height: 30px;
            background: #0d0d0d;
            border-top: 1px solid #333;
            display: flex;
            align-items: center;
            padding: 0 15px;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            gap: 20px;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4CAF50;
        }
        
        /* Context Menu */
        .context-menu {
            position: fixed;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 5px;
            display: none;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .context-menu.visible {
            display: block;
        }
        
        .context-menu-item {
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        .context-menu-item:hover {
            background: rgba(33, 150, 243, 0.2);
        }
        
        .context-menu-separator {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Top Toolbar -->
        <div class="top-toolbar">
            <div class="toolbar-section">
                <button class="btn btn-primary" onclick="newStrategy()">
                    <span>üìÑ</span> New
                </button>
                <button class="btn btn-secondary" onclick="saveStrategy()">
                    <span>üíæ</span> Save
                </button>
                <button class="btn btn-secondary" onclick="loadStrategy()">
                    <span>üìÅ</span> Load
                </button>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <div class="toolbar-section">
                <button class="btn btn-success" onclick="runBacktest()">
                    <span>üìä</span> Backtest
                </button>
                <button class="btn btn-success" onclick="runSimulation()">
                    <span>üéÆ</span> Simulate
                </button>
                <button class="btn btn-warning" onclick="deployLive()">
                    <span>üöÄ</span> Deploy
                </button>
                <button class="btn btn-danger" onclick="stopAll()">
                    <span>‚èπ</span> Stop
                </button>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <div class="toolbar-section">
                <button class="btn btn-secondary" onclick="validateStrategy()">
                    <span>‚úì</span> Validate
                </button>
                <button class="btn btn-secondary" onclick="optimizeStrategy()">
                    <span>‚ö°</span> Optimize
                </button>
                <button class="btn btn-secondary" onclick="showAnalytics()">
                    <span>üìà</span> Analytics
                </button>
            </div>
            
            <div class="toolbar-divider"></div>
            
            <div class="toolbar-section">
                <button class="btn btn-secondary" id="dataFlowBtn" onclick="toggleDataFlow()">
                    <span>üîÑ</span> Data Flow
                </button>
                <button class="btn btn-secondary" onclick="autoLayout()">
                    <span>üéØ</span> Auto Layout
                </button>
                <button class="btn btn-secondary" onclick="clearCanvas()">
                    <span>üóëÔ∏è</span> Clear
                </button>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Sidebar -->
            <div class="sidebar">
                <div class="sidebar-tabs">
                    <button class="sidebar-tab active" onclick="switchSidebarTab('components')">Components</button>
                    <button class="sidebar-tab" onclick="switchSidebarTab('templates')">Templates</button>
                    <button class="sidebar-tab" onclick="switchSidebarTab('history')">History</button>
                </div>
                
                <div class="sidebar-content" id="componentsTab">
                    <input type="text" class="component-search" placeholder="Search components...">
                    
                    <!-- Data Input -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üìä</span> Data Input
                            </div>
                            <span class="category-count">12</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item data-input" draggable="true" data-type="market-data">
                                <span class="component-icon">üìà</span> Market Data
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="order-book">
                                <span class="component-icon">üìã</span> Order Book
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="news-feed">
                                <span class="component-icon">üì∞</span> News Feed
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="social-media">
                                <span class="component-icon">üí¨</span> Social Media
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="blockchain">
                                <span class="component-icon">‚õìÔ∏è</span> Blockchain Data
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="economic">
                                <span class="component-icon">üè¶</span> Economic Data
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="whale-alerts">
                                <span class="component-icon">üêã</span> Whale Alerts
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="funding-rates">
                                <span class="component-icon">üí∞</span> Funding Rates
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="options-flow">
                                <span class="component-icon">üéØ</span> Options Flow
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="fear-greed">
                                <span class="component-icon">üò®</span> Fear & Greed
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="custom-api">
                                <span class="component-icon">üîå</span> Custom API
                            </div>
                            <div class="component-item data-input" draggable="true" data-type="file-input">
                                <span class="component-icon">üìÅ</span> File Input
                            </div>
                        </div>
                    </div>
                    
                    <!-- Data Preprocessing -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üîß</span> Preprocessing
                            </div>
                            <span class="category-count">15</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item preprocessing" draggable="true" data-type="data-cleaner">
                                <span class="component-icon">üßπ</span> Data Cleaner
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="normalizer">
                                <span class="component-icon">üìè</span> Normalizer
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="outlier-detection">
                                <span class="component-icon">‚ö†Ô∏è</span> Outlier Detection
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="missing-handler">
                                <span class="component-icon">üîç</span> Missing Data Handler
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="resampler">
                                <span class="component-icon">‚è±Ô∏è</span> Resampler
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="aggregator">
                                <span class="component-icon">üìä</span> Aggregator
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="smoother">
                                <span class="component-icon">„Ä∞Ô∏è</span> Smoother
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="denoiser">
                                <span class="component-icon">üîá</span> Denoiser
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="validator">
                                <span class="component-icon">‚úÖ</span> Data Validator
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="transformer">
                                <span class="component-icon">üîÑ</span> Transformer
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="encoder">
                                <span class="component-icon">üî¢</span> Encoder
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="scaler">
                                <span class="component-icon">üìê</span> Scaler
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="windower">
                                <span class="component-icon">ü™ü</span> Windower
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="lag-creator">
                                <span class="component-icon">‚èÆÔ∏è</span> Lag Creator
                            </div>
                            <div class="component-item preprocessing" draggable="true" data-type="quality-check">
                                <span class="component-icon">üèÜ</span> Quality Check
                            </div>
                        </div>
                    </div>
                    
                    <!-- Feature Engineering -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>‚öôÔ∏è</span> Feature Engineering
                            </div>
                            <span class="category-count">20</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item feature" draggable="true" data-type="technical-indicators">
                                <span class="component-icon">üìâ</span> Technical Indicators
                            </div>
                            <div class="component-item feature" draggable="true" data-type="rolling-stats">
                                <span class="component-icon">üìä</span> Rolling Statistics
                            </div>
                            <div class="component-item feature" draggable="true" data-type="price-action">
                                <span class="component-icon">üíπ</span> Price Action
                            </div>
                            <div class="component-item feature" draggable="true" data-type="volume-profile">
                                <span class="component-icon">üì∂</span> Volume Profile
                            </div>
                            <div class="component-item feature" draggable="true" data-type="market-microstructure">
                                <span class="component-icon">üî¨</span> Market Microstructure
                            </div>
                            <div class="component-item feature" draggable="true" data-type="correlation-matrix">
                                <span class="component-icon">üï∏Ô∏è</span> Correlation Matrix
                            </div>
                            <div class="component-item feature" draggable="true" data-type="pca">
                                <span class="component-icon">üéØ</span> PCA
                            </div>
                            <div class="component-item feature" draggable="true" data-type="feature-selector">
                                <span class="component-icon">‚úÇÔ∏è</span> Feature Selector
                            </div>
                            <div class="component-item feature" draggable="true" data-type="polynomial">
                                <span class="component-icon">üìà</span> Polynomial Features
                            </div>
                            <div class="component-item feature" draggable="true" data-type="interaction">
                                <span class="component-icon">ü§ù</span> Interaction Features
                            </div>
                        </div>
                    </div>
                    
                    <!-- Analysis -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üîç</span> Analysis
                            </div>
                            <span class="category-count">10</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item analysis" draggable="true" data-type="sentiment-analysis">
                                <span class="component-icon">üòä</span> Sentiment Analysis
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="pattern-recognition">
                                <span class="component-icon">üé®</span> Pattern Recognition
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="trend-detection">
                                <span class="component-icon">üìà</span> Trend Detection
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="regime-detection">
                                <span class="component-icon">üå°Ô∏è</span> Regime Detection
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="anomaly-detection">
                                <span class="component-icon">üö®</span> Anomaly Detection
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="nlp-processor">
                                <span class="component-icon">üí¨</span> NLP Processor
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="volatility-analysis">
                                <span class="component-icon">üìä</span> Volatility Analysis
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="liquidity-analysis">
                                <span class="component-icon">üíß</span> Liquidity Analysis
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="correlation-analysis">
                                <span class="component-icon">üîó</span> Correlation Analysis
                            </div>
                            <div class="component-item analysis" draggable="true" data-type="statistical-tests">
                                <span class="component-icon">üìê</span> Statistical Tests
                            </div>
                        </div>
                    </div>
                    
                    <!-- ML Models -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>ü§ñ</span> ML Models
                            </div>
                            <span class="category-count">18</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item ml-model" draggable="true" data-type="lstm">
                                <span class="component-icon">üß†</span> LSTM Network
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="transformer">
                                <span class="component-icon">üîÑ</span> Transformer
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="xgboost">
                                <span class="component-icon">üå≤</span> XGBoost
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="random-forest">
                                <span class="component-icon">üå≥</span> Random Forest
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="neural-net">
                                <span class="component-icon">üï∏Ô∏è</span> Neural Network
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="reinforcement">
                                <span class="component-icon">üéÆ</span> RL Agent
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="ensemble">
                                <span class="component-icon">üë•</span> Ensemble
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="automl">
                                <span class="component-icon">üîÆ</span> AutoML
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="gan">
                                <span class="component-icon">üé≠</span> GAN
                            </div>
                            <div class="component-item ml-model" draggable="true" data-type="vae">
                                <span class="component-icon">üé®</span> VAE
                            </div>
                        </div>
                    </div>
                    
                    <!-- Logic & Control -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üéõÔ∏è</span> Logic & Control
                            </div>
                            <span class="category-count">12</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item logic" draggable="true" data-type="router">
                                <span class="component-icon">üîÄ</span> Router
                            </div>
                            <div class="component-item logic" draggable="true" data-type="merger">
                                <span class="component-icon">üîó</span> Merger
                            </div>
                            <div class="component-item logic" draggable="true" data-type="splitter">
                                <span class="component-icon">‚úÇÔ∏è</span> Splitter
                            </div>
                            <div class="component-item logic" draggable="true" data-type="filter">
                                <span class="component-icon">üîΩ</span> Filter
                            </div>
                            <div class="component-item logic" draggable="true" data-type="condition">
                                <span class="component-icon">‚ùì</span> Condition
                            </div>
                            <div class="component-item logic" draggable="true" data-type="switch">
                                <span class="component-icon">üîÑ</span> Switch
                            </div>
                            <div class="component-item logic" draggable="true" data-type="loop">
                                <span class="component-icon">üîÅ</span> Loop
                            </div>
                            <div class="component-item logic" draggable="true" data-type="delay">
                                <span class="component-icon">‚è±Ô∏è</span> Delay
                            </div>
                            <div class="component-item logic" draggable="true" data-type="gate">
                                <span class="component-icon">üö™</span> Gate
                            </div>
                            <div class="component-item logic" draggable="true" data-type="trigger">
                                <span class="component-icon">‚ö°</span> Trigger
                            </div>
                            <div class="component-item logic" draggable="true" data-type="scheduler">
                                <span class="component-icon">üìÖ</span> Scheduler
                            </div>
                            <div class="component-item logic" draggable="true" data-type="state-machine">
                                <span class="component-icon">üé∞</span> State Machine
                            </div>
                        </div>
                    </div>
                    
                    <!-- Signals -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üì°</span> Signals
                            </div>
                            <span class="category-count">8</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item signal" draggable="true" data-type="signal-generator">
                                <span class="component-icon">üì°</span> Signal Generator
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-aggregator">
                                <span class="component-icon">üìä</span> Signal Aggregator
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-filter">
                                <span class="component-icon">üîç</span> Signal Filter
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-validator">
                                <span class="component-icon">‚úÖ</span> Signal Validator
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-scorer">
                                <span class="component-icon">üíØ</span> Signal Scorer
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-combiner">
                                <span class="component-icon">üîó</span> Signal Combiner
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-buffer">
                                <span class="component-icon">üì¶</span> Signal Buffer
                            </div>
                            <div class="component-item signal" draggable="true" data-type="signal-logger">
                                <span class="component-icon">üìù</span> Signal Logger
                            </div>
                        </div>
                    </div>
                    
                    <!-- Strategy -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üéØ</span> Strategy
                            </div>
                            <span class="category-count">15</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item strategy" draggable="true" data-type="mean-reversion">
                                <span class="component-icon">üîÑ</span> Mean Reversion
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="trend-following">
                                <span class="component-icon">üìà</span> Trend Following
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="arbitrage">
                                <span class="component-icon">‚öñÔ∏è</span> Arbitrage
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="momentum">
                                <span class="component-icon">üöÄ</span> Momentum
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="market-making">
                                <span class="component-icon">üí±</span> Market Making
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="scalping">
                                <span class="component-icon">‚ö°</span> Scalping
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="grid-trading">
                                <span class="component-icon">üéØ</span> Grid Trading
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="pairs-trading">
                                <span class="component-icon">üë•</span> Pairs Trading
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="volatility">
                                <span class="component-icon">üìä</span> Volatility
                            </div>
                            <div class="component-item strategy" draggable="true" data-type="hybrid">
                                <span class="component-icon">üîÄ</span> Hybrid Strategy
                            </div>
                        </div>
                    </div>
                    
                    <!-- Risk Management -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üõ°Ô∏è</span> Risk Management
                            </div>
                            <span class="category-count">12</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item risk" draggable="true" data-type="position-sizer">
                                <span class="component-icon">üìè</span> Position Sizer
                            </div>
                            <div class="component-item risk" draggable="true" data-type="stop-loss">
                                <span class="component-icon">üõë</span> Stop Loss
                            </div>
                            <div class="component-item risk" draggable="true" data-type="take-profit">
                                <span class="component-icon">üí∞</span> Take Profit
                            </div>
                            <div class="component-item risk" draggable="true" data-type="risk-calculator">
                                <span class="component-icon">üßÆ</span> Risk Calculator
                            </div>
                            <div class="component-item risk" draggable="true" data-type="drawdown-monitor">
                                <span class="component-icon">üìâ</span> Drawdown Monitor
                            </div>
                            <div class="component-item risk" draggable="true" data-type="circuit-breaker">
                                <span class="component-icon">‚ö°</span> Circuit Breaker
                            </div>
                            <div class="component-item risk" draggable="true" data-type="exposure-manager">
                                <span class="component-icon">‚öñÔ∏è</span> Exposure Manager
                            </div>
                            <div class="component-item risk" draggable="true" data-type="kelly-criterion">
                                <span class="component-icon">üìä</span> Kelly Criterion
                            </div>
                            <div class="component-item risk" draggable="true" data-type="var-calculator">
                                <span class="component-icon">üìà</span> VaR Calculator
                            </div>
                            <div class="component-item risk" draggable="true" data-type="portfolio-optimizer">
                                <span class="component-icon">üíº</span> Portfolio Optimizer
                            </div>
                        </div>
                    </div>
                    
                    <!-- Order Execution -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>‚ö°</span> Execution
                            </div>
                            <span class="category-count">10</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item execution" draggable="true" data-type="order-manager">
                                <span class="component-icon">üìã</span> Order Manager
                            </div>
                            <div class="component-item execution" draggable="true" data-type="twap">
                                <span class="component-icon">‚è±Ô∏è</span> TWAP Engine
                            </div>
                            <div class="component-item execution" draggable="true" data-type="vwap">
                                <span class="component-icon">üìä</span> VWAP Engine
                            </div>
                            <div class="component-item execution" draggable="true" data-type="smart-router">
                                <span class="component-icon">üîÄ</span> Smart Router
                            </div>
                            <div class="component-item execution" draggable="true" data-type="iceberg">
                                <span class="component-icon">üßä</span> Iceberg Orders
                            </div>
                            <div class="component-item execution" draggable="true" data-type="slippage-model">
                                <span class="component-icon">üìâ</span> Slippage Model
                            </div>
                            <div class="component-item execution" draggable="true" data-type="order-splitter">
                                <span class="component-icon">‚úÇÔ∏è</span> Order Splitter
                            </div>
                            <div class="component-item execution" draggable="true" data-type="execution-algo">
                                <span class="component-icon">üéØ</span> Execution Algo
                            </div>
                            <div class="component-item execution" draggable="true" data-type="order-validator">
                                <span class="component-icon">‚úÖ</span> Order Validator
                            </div>
                            <div class="component-item execution" draggable="true" data-type="retry-logic">
                                <span class="component-icon">üîÅ</span> Retry Logic
                            </div>
                        </div>
                    </div>
                    
                    <!-- Utility -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üîß</span> Utility
                            </div>
                            <span class="category-count">8</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item utility" draggable="true" data-type="cache">
                                <span class="component-icon">üíæ</span> Cache
                            </div>
                            <div class="component-item utility" draggable="true" data-type="buffer">
                                <span class="component-icon">üì¶</span> Buffer
                            </div>
                            <div class="component-item utility" draggable="true" data-type="queue">
                                <span class="component-icon">üìù</span> Queue
                            </div>
                            <div class="component-item utility" draggable="true" data-type="rate-limiter">
                                <span class="component-icon">‚è≥</span> Rate Limiter
                            </div>
                            <div class="component-item utility" draggable="true" data-type="logger">
                                <span class="component-icon">üìù</span> Logger
                            </div>
                            <div class="component-item utility" draggable="true" data-type="monitor">
                                <span class="component-icon">üëÅÔ∏è</span> Monitor
                            </div>
                            <div class="component-item utility" draggable="true" data-type="debugger">
                                <span class="component-icon">üêõ</span> Debugger
                            </div>
                            <div class="component-item utility" draggable="true" data-type="profiler">
                                <span class="component-icon">‚ö°</span> Profiler
                            </div>
                        </div>
                    </div>
                    
                    <!-- Output -->
                    <div class="component-category">
                        <div class="category-header" onclick="toggleCategory(this)">
                            <div class="category-title">
                                <span>üì§</span> Output
                            </div>
                            <span class="category-count">8</span>
                        </div>
                        <div class="category-content">
                            <div class="component-item output" draggable="true" data-type="trade-executor">
                                <span class="component-icon">üéØ</span> Trade Executor
                            </div>
                            <div class="component-item output" draggable="true" data-type="alert-sender">
                                <span class="component-icon">üîî</span> Alert Sender
                            </div>
                            <div class="component-item output" draggable="true" data-type="database">
                                <span class="component-icon">üóÑÔ∏è</span> Database
                            </div>
                            <div class="component-item output" draggable="true" data-type="dashboard">
                                <span class="component-icon">üìä</span> Dashboard
                            </div>
                            <div class="component-item output" draggable="true" data-type="report-generator">
                                <span class="component-icon">üìà</span> Report Generator
                            </div>
                            <div class="component-item output" draggable="true" data-type="webhook">
                                <span class="component-icon">üîó</span> Webhook
                            </div>
                            <div class="component-item output" draggable="true" data-type="file-writer">
                                <span class="component-icon">üíæ</span> File Writer
                            </div>
                            <div class="component-item output" draggable="true" data-type="metrics-exporter">
                                <span class="component-icon">üìä</span> Metrics Exporter
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-content" id="templatesTab" style="display: none;">
                    <div style="padding: 20px; text-align: center; color: #666;">
                        <p>Strategy Templates</p>
                        <div style="margin-top: 20px;">
                            <button class="btn btn-secondary" style="margin: 5px;">
                                <span>üìà</span> Trend Following
                            </button>
                            <button class="btn btn-secondary" style="margin: 5px;">
                                <span>üîÑ</span> Mean Reversion
                            </button>
                            <button class="btn btn-secondary" style="margin: 5px;">
                                <span>‚öñÔ∏è</span> Arbitrage
                            </button>
                            <button class="btn btn-secondary" style="margin: 5px;">
                                <span>ü§ñ</span> ML-Powered
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-content" id="historyTab" style="display: none;">
                    <div style="padding: 20px; text-align: center; color: #666;">
                        <p>Version History</p>
                        <div style="margin-top: 20px; font-size: 12px;">
                            <div style="padding: 10px; background: rgba(255,255,255,0.05); margin: 5px; border-radius: 6px;">
                                v1.2.3 - 5 mins ago
                            </div>
                            <div style="padding: 10px; background: rgba(255,255,255,0.05); margin: 5px; border-radius: 6px;">
                                v1.2.2 - 1 hour ago
                            </div>
                            <div style="padding: 10px; background: rgba(255,255,255,0.05); margin: 5px; border-radius: 6px;">
                                v1.2.1 - Yesterday
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Canvas Area -->
            <div class="canvas-container" id="canvasContainer">
                <div class="canvas-controls">
                    <button class="canvas-control-btn" onclick="zoomIn()">üîç+</button>
                    <button class="canvas-control-btn" onclick="zoomOut()">üîç-</button>
                    <button class="canvas-control-btn" onclick="resetZoom()">100%</button>
                    <div class="zoom-level" id="zoomLevel">100%</div>
                    <button class="canvas-control-btn" onclick="toggleMinimap()">üó∫Ô∏è</button>
                    <button class="canvas-control-btn" onclick="toggleGrid()">‚äû</button>
                    <button class="canvas-control-btn" onclick="centerView()">‚äô</button>
                </div>
                
                <div class="minimap" id="minimap">
                    <div class="minimap-viewport"></div>
                </div>
                
                <div class="canvas" id="canvas">
                    <div class="canvas-grid" id="canvasGrid"></div>
                    
                    <!-- SVG Layer for Connections -->
                    <svg class="connections-layer" id="connectionsLayer">
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="currentColor" />
                            </marker>
                        </defs>
                    </svg>
                    
                    <!-- Example Nodes (would be dynamically created) -->
                    <div class="node data-input" style="left: 50px; top: 100px;" id="node1">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üìà</span> Market Data
                            </div>
                            <div class="node-status processing"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Exchange:</span>
                                <span class="node-param-value">Binance</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Symbol:</span>
                                <span class="node-param-value">BTC/USDT</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Interval:</span>
                                <span class="node-param-value">5m</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port output data top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node preprocessing" style="left: 300px; top: 100px;" id="node2">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üßπ</span> Data Cleaner
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Method:</span>
                                <span class="node-param-value">Forward Fill</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Outliers:</span>
                                <span class="node-param-value">3œÉ</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input data top" data-port="input"></div>
                            <div class="port output data top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node data-input" style="left: 50px; top: 250px;" id="node3">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üì∞</span> News Feed
                            </div>
                            <div class="node-status processing"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Source:</span>
                                <span class="node-param-value">CryptoPanic</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Filter:</span>
                                <span class="node-param-value">BTC, ETH</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port output data top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node analysis" style="left: 300px; top: 250px;" id="node4">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üòä</span> Sentiment Analysis
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Model:</span>
                                <span class="node-param-value">FinBERT</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Threshold:</span>
                                <span class="node-param-value">0.7</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input data top" data-port="input"></div>
                            <div class="port output signal top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node feature" style="left: 550px; top: 100px;" id="node5">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üìâ</span> Technical Indicators
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Indicators:</span>
                                <span class="node-param-value">RSI, MACD</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Periods:</span>
                                <span class="node-param-value">14, 26, 9</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input data top" data-port="input"></div>
                            <div class="port output data top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node logic merger" style="left: 550px; top: 250px;" id="node6">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üîó</span> Signal Merger
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Method:</span>
                                <span class="node-param-value">Weighted Avg</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Weights:</span>
                                <span class="node-param-value">0.7, 0.3</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input signal top" data-port="input1" style="top: 30%;"></div>
                            <div class="port input signal top" data-port="input2" style="top: 70%;"></div>
                            <div class="port output signal top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node ml-model" style="left: 800px; top: 100px;" id="node7">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üß†</span> LSTM Network
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Model:</span>
                                <span class="node-param-value">v2.3.1</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Confidence:</span>
                                <span class="node-param-value">85%</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input data top" data-port="input"></div>
                            <div class="port output signal top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node strategy" style="left: 800px; top: 250px;" id="node8">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üéØ</span> Strategy Decision
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Type:</span>
                                <span class="node-param-value">Hybrid</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Mode:</span>
                                <span class="node-param-value">Aggressive</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input signal top" data-port="input"></div>
                            <div class="port output control top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node risk" style="left: 1050px; top: 175px;" id="node9">
                        <div class="node-header">
                            <div class="node-title">
                                <span>üõ°Ô∏è</span> Risk Manager
                            </div>
                            <div class="node-status success"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Max Risk:</span>
                                <span class="node-param-value">2%</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Position:</span>
                                <span class="node-param-value">0.1 BTC</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input control top" data-port="input"></div>
                            <div class="port output control top" data-port="output"></div>
                        </div>
                    </div>
                    
                    <div class="node execution" style="left: 1300px; top: 175px;" id="node10">
                        <div class="node-header">
                            <div class="node-title">
                                <span>‚ö°</span> Order Executor
                            </div>
                            <div class="node-status idle"></div>
                        </div>
                        <div class="node-body">
                            <div class="node-param">
                                <span class="node-param-label">Type:</span>
                                <span class="node-param-value">TWAP</span>
                            </div>
                            <div class="node-param">
                                <span class="node-param-label">Slices:</span>
                                <span class="node-param-value">5</span>
                            </div>
                        </div>
                        <div class="node-ports">
                            <div class="port input control top" data-port="input"></div>
                            <div class="port output data top" data-port="output"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Context Menu -->
                <div class="context-menu" id="contextMenu">
                    <div class="context-menu-item" onclick="duplicateNode()">Duplicate</div>
                    <div class="context-menu-item" onclick="deleteNode()">Delete</div>
                    <div class="context-menu-separator"></div>
                    <div class="context-menu-item" onclick="configureNode()">Configure</div>
                    <div class="context-menu-item" onclick="disableNode()">Disable</div>
                    <div class="context-menu-separator"></div>
                    <div class="context-menu-item" onclick="groupNodes()">Group</div>
                    <div class="context-menu-item" onclick="ungroupNodes()">Ungroup</div>
                </div>
            </div>
            
            <!-- Right Panel -->
            <div class="right-panel">
                <div class="panel-tabs">
                    <button class="panel-tab active" onclick="switchPanelTab('properties')">Properties</button>
                    <button class="panel-tab" onclick="switchPanelTab('data')">Data Flow</button>
                    <button class="panel-tab" onclick="switchPanelTab('logs')">Logs</button>
                </div>
                
                <div class="panel-content" id="propertiesPanel">
                    <div class="property-section">
                        <div class="property-title">Node Configuration</div>
                        <div class="property-item">
                            <div class="property-label">Name</div>
                            <input type="text" class="property-input" value="Market Data">
                        </div>
                        <div class="property-item">
                            <div class="property-label">Type</div>
                            <select class="property-select">
                                <option>Data Input</option>
                                <option>Processing</option>
                                <option>Analysis</option>
                                <option>ML Model</option>
                            </select>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Exchange</div>
                            <select class="property-select">
                                <option>Binance</option>
                                <option>OKX</option>
                                <option>Coinbase</option>
                            </select>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Symbol</div>
                            <input type="text" class="property-input" value="BTC/USDT">
                        </div>
                        <div class="property-item">
                            <div class="property-label">Interval</div>
                            <select class="property-select">
                                <option>1m</option>
                                <option selected>5m</option>
                                <option>15m</option>
                                <option>1h</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="property-section">
                        <div class="property-title">Advanced Settings</div>
                        <div class="property-item">
                            <div class="property-label">Cache Data</div>
                            <select class="property-select">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Retry on Error</div>
                            <select class="property-select">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>
                        <div class="property-item">
                            <div class="property-label">Max Retries</div>
                            <input type="number" class="property-input" value="3">
                        </div>
                    </div>
                    
                    <div style="padding: 10px;">
                        <button class="btn btn-primary" style="width: 100%; margin-bottom: 10px;">
                            Apply Changes
                        </button>
                        <button class="btn btn-secondary" style="width: 100%;">
                            Reset to Default
                        </button>
                    </div>
                </div>
                
                <div class="panel-content" id="dataPanel" style="display: none;">
                    <div style="padding: 10px; font-size: 12px;">
                        <div style="margin-bottom: 15px;">
                            <div style="color: #4CAF50; margin-bottom: 5px;">üìä Market Data ‚Üí Data Cleaner</div>
                            <div style="color: #888; font-size: 11px;">Rate: 120 msg/s</div>
                            <div style="color: #888; font-size: 11px;">Latency: 2ms</div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <div style="color: #4CAF50; margin-bottom: 5px;">üì∞ News Feed ‚Üí Sentiment Analysis</div>
                            <div style="color: #888; font-size: 11px;">Rate: 5 msg/s</div>
                            <div style="color: #888; font-size: 11px;">Latency: 150ms</div>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <div style="color: #2196F3; margin-bottom: 5px;">üîó Signals ‚Üí Strategy Decision</div>
                            <div style="color: #888; font-size: 11px;">Rate: 10 msg/s</div>
                            <div style="color: #888; font-size: 11px;">Latency: 5ms</div>
                        </div>
                    </div>
                </div>
                
                <div class="panel-content" id="logsPanel" style="display: none;">
                    <div style="padding: 10px; font-size: 11px; font-family: monospace;">
                        <div style="color: #4CAF50;">[10:23:45] Market Data: Connected to Binance</div>
                        <div style="color: #2196F3;">[10:23:46] Data Cleaner: Processing batch #1234</div>
                        <div style="color: #FFC107;">[10:23:47] Sentiment: Analyzing 15 news items</div>
                        <div style="color: #4CAF50;">[10:23:48] LSTM: Prediction confidence 85%</div>
                        <div style="color: #f44336;">[10:23:49] Risk Manager: Position within limits</div>
                        <div style="color: #2196F3;">[10:23:50] Order Executor: Placing order...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <div class="status-indicator"></div>
                <span>Connected</span>
            </div>
            <div class="status-item">
                <span>Nodes: 10</span>
            </div>
            <div class="status-item">
                <span>Connections: 9</span>
            </div>
            <div class="status-item">
                <span>CPU: 12%</span>
            </div>
            <div class="status-item">
                <span>Memory: 245 MB</span>
            </div>
            <div class="status-item">
                <span>Latency: 2ms</span>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let currentZoom = 1;
        let isDragging = false;
        let draggedNode = null;
        let selectedNode = null;
        let isConnecting = false;
        let connectionStart = null;
        let dataFlowAnimation = false;
        
        // Initialize connections
        drawConnections();
        
        // Toggle category expansion
        function toggleCategory(header) {
            const content = header.nextElementSibling;
            content.classList.toggle('expanded');
        }
        
        // Switch sidebar tabs
        function switchSidebarTab(tab) {
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.sidebar-content').forEach(c => c.style.display = 'none');
            
            event.target.classList.add('active');
            document.getElementById(tab + 'Tab').style.display = 'block';
        }
        
        // Switch panel tabs
        function switchPanelTab(tab) {
            document.querySelectorAll('.panel-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel-content').forEach(c => c.style.display = 'none');
            
            event.target.classList.add('active');
            document.getElementById(tab + 'Panel').style.display = 'block';
        }
        
        // Canvas zoom functions
        function zoomIn() {
            currentZoom = Math.min(currentZoom * 1.2, 3);
            updateZoom();
        }
        
        function zoomOut() {
            currentZoom = Math.max(currentZoom / 1.2, 0.3);
            updateZoom();
        }
        
        function resetZoom() {
            currentZoom = 1;
            updateZoom();
        }
        
        function updateZoom() {
            const canvas = document.getElementById('canvas');
            canvas.style.transform = `scale(${currentZoom})`;
            document.getElementById('zoomLevel').textContent = Math.round(currentZoom * 100) + '%';
        }
        
        // Toggle minimap
        function toggleMinimap() {
            const minimap = document.getElementById('minimap');
            minimap.classList.toggle('visible');
        }
        
        // Toggle grid
        function toggleGrid() {
            const grid = document.getElementById('canvasGrid');
            grid.style.display = grid.style.display === 'none' ? 'block' : 'none';
        }
        
        // Center view
        function centerView() {
            const canvas = document.getElementById('canvas');
            canvas.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
        }
        
        // Draw connections between nodes
        function drawConnections() {
            const svg = document.getElementById('connectionsLayer');
            
            // Clear existing connections
            svg.innerHTML = svg.innerHTML.split('</defs>')[0] + '</defs>';
            
            // Example connections
            const connections = [
                { from: 'node1', to: 'node2', type: 'data' },
                { from: 'node2', to: 'node5', type: 'data' },
                { from: 'node3', to: 'node4', type: 'data' },
                { from: 'node4', to: 'node6', type: 'signal', fromPort: 'output', toPort: 'input1' },
                { from: 'node5', to: 'node7', type: 'data' },
                { from: 'node6', to: 'node8', type: 'signal' },
                { from: 'node7', to: 'node6', type: 'signal', fromPort: 'output', toPort: 'input2' },
                { from: 'node8', to: 'node9', type: 'control' },
                { from: 'node9', to: 'node10', type: 'control' }
            ];
            
            connections.forEach(conn => {
                const fromNode = document.getElementById(conn.from);
                const toNode = document.getElementById(conn.to);
                
                if (fromNode && toNode) {
                    const fromRect = fromNode.getBoundingClientRect();
                    const toRect = toNode.getBoundingClientRect();
                    const canvasRect = document.getElementById('canvas').getBoundingClientRect();
                    
                    const x1 = fromRect.right - canvasRect.left;
                    const y1 = fromRect.top + fromRect.height / 2 - canvasRect.top;
                    const x2 = toRect.left - canvasRect.left;
                    const y2 = toRect.top + toRect.height / 2 - canvasRect.top;
                    
                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    const midX = (x1 + x2) / 2;
                    path.setAttribute('d', `M ${x1} ${y1} C ${midX} ${y1}, ${midX} ${y2}, ${x2} ${y2}`);
                    path.setAttribute('class', `connection ${conn.type} ${dataFlowAnimation ? 'animated' : ''}`);
                    path.setAttribute('marker-end', 'url(#arrowhead)');
                    
                    svg.appendChild(path);
                }
            });
        }
        
        // Toggle data flow animation
        function toggleDataFlow() {
            dataFlowAnimation = !dataFlowAnimation;
            const btn = document.getElementById('dataFlowBtn');
            btn.classList.toggle('active');
            drawConnections();
        }
        
        // Node drag and drop
        document.querySelectorAll('.node').forEach(node => {
            node.addEventListener('mousedown', startDrag);
            node.addEventListener('click', selectNode);
            node.addEventListener('contextmenu', showContextMenu);
        });
        
        function startDrag(e) {
            if (e.target.classList.contains('port')) return;
            isDragging = true;
            draggedNode = e.currentTarget;
            draggedNode.style.zIndex = 1000;
        }
        
        function selectNode(e) {
            if (selectedNode) selectedNode.classList.remove('selected');
            selectedNode = e.currentTarget;
            selectedNode.classList.add('selected');
        }
        
        function showContextMenu(e) {
            e.preventDefault();
            const menu = document.getElementById('contextMenu');
            menu.style.left = e.pageX + 'px';
            menu.style.top = e.pageY + 'px';
            menu.classList.add('visible');
        }
        
        // Document mouse events
        document.addEventListener('mousemove', (e) => {
            if (isDragging && draggedNode) {
                const canvasRect = document.getElementById('canvas').getBoundingClientRect();
                draggedNode.style.left = (e.clientX - canvasRect.left) / currentZoom - 50 + 'px';
                draggedNode.style.top = (e.clientY - canvasRect.top) / currentZoom - 30 + 'px';
                drawConnections();
            }
        });
        
        document.addEventListener('mouseup', () => {
            if (draggedNode) {
                draggedNode.style.zIndex = '';
            }
            isDragging = false;
            draggedNode = null;
        });
        
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('contextMenu');
            if (!menu.contains(e.target)) {
                menu.classList.remove('visible');
            }
        });
        
        // Drag and drop from sidebar
        let draggedComponent = null;
        
        document.querySelectorAll('.component-item').forEach(item => {
            item.addEventListener('dragstart', (e) => {
                draggedComponent = {
                    type: e.target.dataset.type,
                    category: e.target.className.split(' ')[1],
                    text: e.target.textContent.trim()
                };
            });
        });
        
        const canvas = document.getElementById('canvas');
        canvas.addEventListener('dragover', (e) => {
            e.preventDefault();
        });
        
        canvas.addEventListener('drop', (e) => {
            e.preventDefault();
            if (draggedComponent) {
                const canvasRect = canvas.getBoundingClientRect();
                const x = (e.clientX - canvasRect.left) / currentZoom;
                const y = (e.clientY - canvasRect.top) / currentZoom;
                createNode(draggedComponent, x, y);
                draggedComponent = null;
            }
        });
        
        // Create new node
        function createNode(component, x, y) {
            const node = document.createElement('div');
            node.className = `node ${component.category}`;
            node.style.left = x + 'px';
            node.style.top = y + 'px';
            node.id = 'node_' + Date.now();
            
            node.innerHTML = `
                <div class="node-header">
                    <div class="node-title">
                        ${component.text}
                    </div>
                    <div class="node-status idle"></div>
                </div>
                <div class="node-body">
                    <div class="node-param">
                        <span class="node-param-label">Status:</span>
                        <span class="node-param-value">Ready</span>
                    </div>
                </div>
                <div class="node-ports">
                    <div class="port input data top" data-port="input"></div>
                    <div class="port output data top" data-port="output"></div>
                </div>
            `;
            
            canvas.appendChild(node);
            
            // Add event listeners
            node.addEventListener('mousedown', startDrag);
            node.addEventListener('click', selectNode);
            node.addEventListener('contextmenu', showContextMenu);
        }
        
        // Toolbar functions
        function newStrategy() {
            if (confirm('Create a new strategy? Current work will be lost.')) {
                location.reload();
            }
        }
        
        function saveStrategy() {
            alert('Strategy saved successfully!');
        }
        
        function loadStrategy() {
            alert('Load strategy dialog would open here');
        }
        
        function runBacktest() {
            alert('Starting backtest...');
        }
        
        function runSimulation() {
            alert('Starting simulation...');
        }
        
        function deployLive() {
            if (confirm('Deploy this strategy to live trading?')) {
                alert('Strategy deployed!');
            }
        }
        
        function stopAll() {
            if (confirm('Stop all running strategies?')) {
                alert('All strategies stopped.');
            }
        }
        
        function validateStrategy() {
            alert('Strategy validation: ‚úì Passed');
        }
        
        function optimizeStrategy() {
            alert('Running optimization...');
        }
        
        function showAnalytics() {
            alert('Opening analytics dashboard...');
        }
        
        function autoLayout() {
            alert('Auto-arranging nodes...');
        }
        
        function clearCanvas() {
            if (confirm('Clear the canvas?')) {
                const nodes = document.querySelectorAll('.node');
                nodes.forEach(node => node.remove());
                drawConnections();
            }
        }
        
        // Context menu functions
        function duplicateNode() {
            alert('Node duplicated');
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        function deleteNode() {
            if (selectedNode && confirm('Delete this node?')) {
                selectedNode.remove();
                drawConnections();
            }
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        function configureNode() {
            alert('Opening node configuration...');
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        function disableNode() {
            alert('Node disabled');
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        function groupNodes() {
            alert('Creating group...');
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        function ungroupNodes() {
            alert('Ungrouping nodes...');
            document.getElementById('contextMenu').classList.remove('visible');
        }
        
        // Initialize some categories as expanded
        document.querySelectorAll('.category-header').forEach((header, index) => {
            if (index < 3) {
                header.nextElementSibling.classList.add('expanded');
            }
        });
    </script>
</body>
</html>